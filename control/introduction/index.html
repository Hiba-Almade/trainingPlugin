<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="../../widget/common/js/introduction.js"></script>
  <script src="../../../../scripts/tinymce/tinymce.min.js"></script>
  <script src="../../../../scripts/buildfire.js"></script>
  <!-- Load helper.css to use our helper classes -->
  <link href="../../../../styles/helper.css" rel="stylesheet" />
  <link href="../../../../styles/siteIcons.css" rel="stylesheet" />
  <link href="../../widget/common/css/introduction.css" rel="stylesheet"/>


  <!-- JS -->
  <script src="../../../../scripts/jquery/jquery-1.11.2.min.js"></script>
  <script src="../../../../scripts/buildfire.js"></script>
  <script src="../../../../scripts/sortable.min.js"></script>
  <script src="../../../../scripts/buildfire/components/carousel/carousel.js"></script>
</head>
<body>
  <div class="container" id="introduction-container">
    <div class="introDes">
      <p class="infoNote">Add an introduction section with images, text and other elements with the text editor. </p>
    </div>
    
    <div class="carousel"></div></br>
    <textarea id="wysiwygContent" name="content"></textarea>
  </div>
  
  <script>
    tinymce.init({
      selector: "#wysiwygContent",
      setup:(editor)=>{
        editor.on("keyup",(e)=>{
          let content=tinymce.activeEditor.getContent();
          Introductions.save({ images: Introductions.getImages(), description:content },(err,res)=>{
            if(err) console.error(err);
            console.log(res);
          });
        })
      },
      content_style:
    "body { background: #edf6f6; color: #626b75; font-size: 14pt; font-family: Arial; }",
    });
    //create a new instance of the buildfire carousel editor
    let editor = new buildfire.components.carousel.editor(".carousel");
    

    Introductions.get((err, res) => {
      if (err)
        console.error(err);
      else
        Introductions.loadItemsCP(res.data.images, res.data.description)
        console.log(res, "Its introduction loading")
    })
    Introductions.carouselEvents();
  </script>
</body>

</html>